name: Run RSpec, Rubocop
on: push

jobs:
  unit-test:
    name: Setup
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Docker
        shell: bash
        run: |
          docker-compose build
          docker-compose run web bundle install
          docker-compose run web bundle exec rails db:create
      - name: Run Rspec
        shell: bash
        run: |
          docker-compose run web bundle exec rspec
      - name: Run Rubocop
        shell: bash
        run: |
          docker-compose run web bundle exec rubocop
